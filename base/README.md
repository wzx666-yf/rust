å¦‚æœä½ æƒ³åœ¨ **åŒä¸€ä¸ª Cargo é¡¹ç›®** ä¸­å†™å¤šä¸ª `.rs` æ–‡ä»¶ï¼Œå¹¶ä¸” **æ¯ä¸ªéƒ½èƒ½ç‹¬ç«‹è¿è¡Œ**ï¼Œä½ æœ‰ä»¥ä¸‹ **ä¸‰ç§æ–¹æ³•** è§£å†³ï¼š

------

## **æ–¹æ³• 1ï¼šä½¿ç”¨ `[[bin]]` å®šä¹‰å¤šä¸ªå¯æ‰§è¡Œæ–‡ä»¶**

ä½ å¯ä»¥åœ¨ `Cargo.toml` ä¸­ **æ‰‹åŠ¨å®šä¹‰å¤šä¸ªäºŒè¿›åˆ¶æ–‡ä»¶**ï¼Œè®©å®ƒä»¬èƒ½å¤Ÿåˆ†åˆ«è¿è¡Œã€‚

### **ä¿®æ”¹ `Cargo.toml`**

```toml
[package]
name = "first_part"
version = "0.1.0"
edition = "2021"

[[bin]]
name = "variable"
path = "src/variable.rs"
```

è¿™æ ·ï¼ŒCargo ä¼šçŸ¥é“ `src/variable.rs` æ˜¯ä¸€ä¸ª **äºŒè¿›åˆ¶ç¨‹åº**ï¼Œç„¶åä½ å°±å¯ä»¥è¿è¡Œï¼š

```sh
cargo run --bin variable
```

å¦‚æœä½ æœ‰ **å¤šä¸ªå¯æ‰§è¡Œæ–‡ä»¶**ï¼ˆä¾‹å¦‚ `src/foo.rs`ã€`src/bar.rs`ï¼‰ï¼Œä½ å¯ä»¥åœ¨ `Cargo.toml` é‡Œè¿™æ ·å®šä¹‰ï¼š

```toml
[[bin]]
name = "foo"
path = "src/foo.rs"

[[bin]]
name = "bar"
path = "src/bar.rs"
```

ç„¶ååˆ†åˆ«è¿è¡Œï¼š

```sh
cargo run --bin foo
cargo run --bin bar
```

------

## **æ–¹æ³• 2ï¼šå°† `src/bin/` ä½œä¸ºäºŒè¿›åˆ¶æ–‡ä»¶å­˜æ”¾ç›®å½•**

Rust çš„ `cargo` å…è®¸ä½ **è‡ªåŠ¨è¯†åˆ« `src/bin/` ç›®å½•ä¸‹çš„æ‰€æœ‰ `.rs` æ–‡ä»¶**ä½œä¸º **ç‹¬ç«‹çš„å¯æ‰§è¡Œç¨‹åº**ï¼Œä½ ä¸éœ€è¦ä¿®æ”¹ `Cargo.toml`ã€‚

### **ä¿®æ”¹é¡¹ç›®ç»“æ„**

è°ƒæ•´ä½ çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

```sh
D:\workhome\rust\first_part\
â”œâ”€â”€ src\
â”‚   â”œâ”€â”€ bin\
â”‚   â”‚   â”œâ”€â”€ variable.rs  # å¯æ‰§è¡Œæ–‡ä»¶1
â”‚   â”‚   â”œâ”€â”€ foo.rs       # å¯æ‰§è¡Œæ–‡ä»¶2
â”‚   â”‚   â”œâ”€â”€ bar.rs       # å¯æ‰§è¡Œæ–‡ä»¶3
â”‚   â”œâ”€â”€ lib.rs           # å¦‚æœä½ æƒ³æ·»åŠ å…±äº«ä»£ç ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ Cargo.toml
```

è¿™æ ·ï¼ŒCargo ä¼š**è‡ªåŠ¨è¯†åˆ«** `src/bin/*.rs` ä½œä¸º **å•ç‹¬çš„äºŒè¿›åˆ¶ç›®æ ‡**ã€‚

ç„¶åï¼Œä½ å¯ä»¥è¿è¡Œï¼š

```sh
cargo run --bin variable
cargo run --bin foo
cargo run --bin bar
```

ğŸ“Œ **æ¨èä½¿ç”¨è¿™ç§æ–¹å¼ï¼** å®ƒæ¯” `[[bin]]` é…ç½®æ›´çµæ´»ï¼Œ**è‡ªåŠ¨è¯†åˆ« `src/bin/` é‡Œçš„æ‰€æœ‰ `.rs` æ–‡ä»¶**ã€‚

------

## **æ–¹æ³• 3ï¼šåˆ›å»ºå¤šä¸ª Cargo å­é¡¹ç›®ï¼ˆç‹¬ç«‹çš„ `Cargo.toml`ï¼‰**

å¦‚æœä½ å¸Œæœ› **æ¯ä¸ª Rust æ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ Cargo é¡¹ç›®**ï¼Œå¯ä»¥ä½¿ç”¨ **Cargo å·¥ä½œç©ºé—´ï¼ˆworkspaceï¼‰**ã€‚

### **1. ä¿®æ”¹ `Cargo.toml`ï¼Œè®¾ä¸º workspace**

```toml
[workspace]
members = ["variable", "foo", "bar"]
```

### **2. è°ƒæ•´ç›®å½•ç»“æ„**

```sh
D:\workhome\rust\first_part\
â”œâ”€â”€ variable\        # å˜é‡ç›¸å…³ç¨‹åº
â”‚   â”œâ”€â”€ src\
â”‚   â”‚   â”œâ”€â”€ main.rs
â”‚   â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ foo\             # å…¶ä»–åŠŸèƒ½
â”‚   â”œâ”€â”€ src\
â”‚   â”‚   â”œâ”€â”€ main.rs
â”‚   â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ bar\             # å¦ä¸€ä¸ªç‹¬ç«‹ç¨‹åº
â”‚   â”œâ”€â”€ src\
â”‚   â”‚   â”œâ”€â”€ main.rs
â”‚   â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ Cargo.toml       # è¿™æ˜¯ workspace çš„ä¸»é…ç½®æ–‡ä»¶
```

ç„¶åï¼Œåœ¨ `first_part/` ç›®å½•ä¸‹è¿è¡Œï¼š

```sh
cargo run -p variable
cargo run -p foo
cargo run -p bar
```

ğŸ“Œ **é€‚ç”¨äºå¤šä¸ªç‹¬ç«‹ Rust é¡¹ç›®çš„æƒ…å†µï¼Œä½†å¯¹ä½ çš„éœ€æ±‚å¯èƒ½æœ‰ç‚¹å¤æ‚**ã€‚

------

## **ç»“è®º**

| æ–¹æ³•                                                   | é€‚ç”¨åœºæ™¯                        | ä¼˜ç‚¹                                      | è¿è¡Œæ–¹å¼                   |
| ------------------------------------------------------ | ------------------------------- | ----------------------------------------- | -------------------------- |
| **æ–¹æ³• 1ï¼š`[[bin]]` åœ¨ `Cargo.toml` ä¸­å®šä¹‰å¤šä¸ªäºŒè¿›åˆ¶** | åªæœ‰å°‘é‡ `.rs` æ–‡ä»¶ï¼Œæƒ³æ‰‹åŠ¨ç®¡ç† | é€‚åˆå°é¡¹ç›®                                | `cargo run --bin variable` |
| **æ–¹æ³• 2ï¼šä½¿ç”¨ `src/bin/` ç›®å½•** âœ… æ¨è                | å¤šä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¸”å¸Œæœ›è‡ªåŠ¨ç®¡ç†  | Cargo **è‡ªåŠ¨è¯†åˆ«**ï¼Œæ— éœ€ä¿®æ”¹ `Cargo.toml` | `cargo run --bin variable` |
| **æ–¹æ³• 3ï¼šä½¿ç”¨ Cargo workspaceï¼ˆå¤šä¸ªç‹¬ç«‹å­é¡¹ç›®ï¼‰**     | æ¯ä¸ª `.rs` éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹é¡¹ç›®     | é€‚ç”¨äºå¤§å‹é¡¹ç›®                            | `cargo run -p variable`    |

ğŸ“Œ **æ¨èä½¿ç”¨** `src/bin/` ç›®å½•æ–¹å¼ï¼ˆæ–¹æ³• 2ï¼‰ï¼Œå®ƒæœ€ç®€å•ï¼Œç»´æŠ¤æˆæœ¬ä½ã€‚ğŸš€

ä½¿ç”¨ **æ–¹æ³• 1ï¼ˆæ‰‹åŠ¨å®šä¹‰ `[[bin]]`ï¼‰** æˆ– **æ–¹æ³• 2ï¼ˆ`src/bin/` è‡ªåŠ¨è¯†åˆ«ï¼‰** **éƒ½ä¸éœ€è¦ `src/main.rs`**ï¼Œä½†å¦‚æœä½ æƒ³è®© `cargo run` **é»˜è®¤æ‰§è¡Œä¸€ä¸ªæ–‡ä»¶**ï¼Œé‚£ä¹ˆ **`src/main.rs` æ˜¯å¿…é¡»çš„**ã€‚

------

### **æ–¹æ³• 1 å’Œ æ–¹æ³• 2 æ˜¯å¦éœ€è¦ `src/main.rs`ï¼Ÿ**

| æ–¹å¼                                           | éœ€è¦ `src/main.rs` å—ï¼Ÿ | è¯´æ˜                                                         |
| ---------------------------------------------- | ----------------------- | ------------------------------------------------------------ |
| **æ–¹æ³• 1ï¼š`[[bin]]` æ‰‹åŠ¨å®šä¹‰å¤šä¸ªäºŒè¿›åˆ¶æ–‡ä»¶**   | âŒ **ä¸éœ€è¦**            | åªè¦ `Cargo.toml` é‡Œ `[[bin]]` æŒ‡å®šäº† `.rs` æ–‡ä»¶ï¼Œ`src/main.rs` ä¸æ˜¯å¿…é¡»çš„ã€‚ |
| **æ–¹æ³• 2ï¼š`src/bin/` ç›®å½•ç®¡ç†å¤šä¸ª `.rs` æ–‡ä»¶** | âŒ **ä¸éœ€è¦**            | Cargo **è‡ªåŠ¨è¯†åˆ«** `src/bin/*.rs` é‡Œçš„æ–‡ä»¶ï¼Œæ¯ä¸ªéƒ½æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¸éœ€è¦ `src/main.rs`ã€‚ |
| **å¦‚æœæƒ³ `cargo run` ç›´æ¥è¿è¡Œ**                | âœ… **éœ€è¦**              | `cargo run` **é»˜è®¤è¿è¡Œ `src/main.rs`**ï¼Œå¦‚æœå®ƒä¸å­˜åœ¨ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®š `cargo run --bin xxx`ã€‚ |

------

### **ä»€ä¹ˆæ—¶å€™éœ€è¦ `src/main.rs`ï¼Ÿ**

- å¦‚æœä½ å¸Œæœ› `cargo run` ç›´æ¥è¿è¡ŒæŸä¸ªç¨‹åº

  ï¼Œä½ éœ€è¦ä¸€ä¸ª 

  ```
  src/main.rs
  ```

  ï¼Œä¾‹å¦‚ï¼š

  ```rust
  fn main() {
      println!("Hello from main.rs");
  }
  ```

  ç„¶åä½ å¯ä»¥ç›´æ¥è¿è¡Œï¼š

  ```sh
  cargo run
  ```

- å¦‚æœ `src/main.rs` ä¸å­˜åœ¨

  ï¼Œä½ å¿…é¡»ä½¿ç”¨ 

  ```
  cargo run --bin xxx
  ```

   æŒ‡å®šè¦è¿è¡Œçš„æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š

  ```sh
  cargo run --bin variable
  ```

------

### **æœ€ä½³å®è·µ**

âœ… **æ¨è**ï¼š

- å¦‚æœæœ‰å¤šä¸ªå¯æ‰§è¡Œæ–‡ä»¶

  ï¼Œä½¿ç”¨ 

  ```
  src/bin/
  ```

   ç›®å½•ï¼Œä¸å†™ 

  ```
  src/main.rs
  ```

  ï¼Œç„¶åè¿è¡Œï¼š

  ```sh
  cargo run --bin variable
  ```

- **å¦‚æœä½ å¸Œæœ› `cargo run` é»˜è®¤è¿è¡ŒæŸä¸ªæ–‡ä»¶**ï¼Œé‚£ä¹ˆ **`src/main.rs` æ˜¯å¿…é¡»çš„**ã€‚

------

### **ç»“è®º**

- **`src/main.rs` ä¸æ˜¯å¿…é¡»çš„**ï¼Œé™¤éä½ æƒ³ `cargo run` ç›´æ¥æ‰§è¡Œå®ƒã€‚

- å¦‚æœ `src/main.rs` ä¸å­˜åœ¨

  ï¼Œä½ éœ€è¦ 

  æŒ‡å®šäºŒè¿›åˆ¶æ–‡ä»¶

   è¿è¡Œï¼š

  ```sh
  cargo run --bin your_file_name
  ```

- **æ¨è `src/bin/` æ–¹å¼**ï¼ŒCargo **è‡ªåŠ¨è¯†åˆ«æ‰€æœ‰ `.rs` æ–‡ä»¶**ï¼Œæ›´æ–¹ä¾¿ï¼ğŸš€